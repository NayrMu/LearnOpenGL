#version 330 core
layout (location = 0) in vec3 aPos;
layout (location = 1) in vec2 aTexCoord;
layout (location = 2) in mat4 instanceTransform;

out vec2 TexCoord;

uniform mat4 view;
uniform mat4 projection;

void main()
{
    mat4 transposedInstanceTransform = mat4(
        instanceTransform[0][0], instanceTransform[1][0], instanceTransform[2][0], instanceTransform[3][0],
        instanceTransform[0][1], instanceTransform[1][1], instanceTransform[2][1], instanceTransform[3][1],
        instanceTransform[0][2], instanceTransform[1][2], instanceTransform[2][2], instanceTransform[3][2],
        instanceTransform[0][3], instanceTransform[1][3], instanceTransform[2][3], instanceTransform[3][3]
    );
    gl_Position = projection * view * transposedInstanceTransform * vec4(aPos, 1.0);
    TexCoord = aTexCoord;
}